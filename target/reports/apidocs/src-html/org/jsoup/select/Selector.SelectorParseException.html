<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (21) -->
<title>Source code</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="source: package: org.jsoup.select, class: Selector, class: SelectorParseException">
<meta name="generator" content="javadoc/SourceToHTMLConverter">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body class="source-page">
<main role="main">
<div class="source-container">
<pre><span class="source-line-no">001</span><span id="line-1">package org.jsoup.select;</span>
<span class="source-line-no">002</span><span id="line-2"></span>
<span class="source-line-no">003</span><span id="line-3">import org.jsoup.helper.Validate;</span>
<span class="source-line-no">004</span><span id="line-4">import org.jsoup.nodes.Element;</span>
<span class="source-line-no">005</span><span id="line-5">import org.jspecify.annotations.Nullable;</span>
<span class="source-line-no">006</span><span id="line-6"></span>
<span class="source-line-no">007</span><span id="line-7">import java.util.Collection;</span>
<span class="source-line-no">008</span><span id="line-8">import java.util.IdentityHashMap;</span>
<span class="source-line-no">009</span><span id="line-9"></span>
<span class="source-line-no">010</span><span id="line-10">/**</span>
<span class="source-line-no">011</span><span id="line-11"> * CSS-like element selector, that finds elements matching a query.</span>
<span class="source-line-no">012</span><span id="line-12"> *</span>
<span class="source-line-no">013</span><span id="line-13"> * &lt;h2&gt;Selector syntax&lt;/h2&gt;</span>
<span class="source-line-no">014</span><span id="line-14"> * &lt;p&gt;</span>
<span class="source-line-no">015</span><span id="line-15"> * A selector is a chain of simple selectors, separated by combinators. Selectors are &lt;b&gt;case insensitive&lt;/b&gt; (including against</span>
<span class="source-line-no">016</span><span id="line-16"> * elements, attributes, and attribute values).</span>
<span class="source-line-no">017</span><span id="line-17"> * &lt;/p&gt;</span>
<span class="source-line-no">018</span><span id="line-18"> * &lt;p&gt;</span>
<span class="source-line-no">019</span><span id="line-19"> * The universal selector {@code *} is implicit when no element selector is supplied (i.e. {@code .header} and {@code *.header}</span>
<span class="source-line-no">020</span><span id="line-20"> * are equivalent).</span>
<span class="source-line-no">021</span><span id="line-21"> * &lt;/p&gt;</span>
<span class="source-line-no">022</span><span id="line-22"> * &lt;style&gt;table.syntax tr td {vertical-align: top; padding-right: 2em; padding-top:0.5em; padding-bottom:0.5em; } table.syntax tr:hover{background-color: #eee;} table.syntax {border-spacing: 0px 0px;}&lt;/style&gt;</span>
<span class="source-line-no">023</span><span id="line-23"> * &lt;table summary="" class="syntax"&gt;&lt;colgroup&gt;&lt;col span="1" style="width: 20%;"&gt;&lt;col span="1" style="width: 40%;"&gt;&lt;col span="1" style="width: 40%;"&gt;&lt;/colgroup&gt;</span>
<span class="source-line-no">024</span><span id="line-24"> * &lt;tr&gt;&lt;th align="left"&gt;Pattern&lt;/th&gt;&lt;th align="left"&gt;Matches&lt;/th&gt;&lt;th align="left"&gt;Example&lt;/th&gt;&lt;/tr&gt;</span>
<span class="source-line-no">025</span><span id="line-25"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;*&lt;/code&gt;&lt;/td&gt;&lt;td&gt;any element&lt;/td&gt;&lt;td&gt;&lt;code&gt;*&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">026</span><span id="line-26"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;tag&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements with the given tag name&lt;/td&gt;&lt;td&gt;&lt;code&gt;div&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">027</span><span id="line-27"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;*|E&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements of type E in any namespace (including non-namespaced)&lt;/td&gt;&lt;td&gt;&lt;code&gt;*|name&lt;/code&gt; finds &lt;code&gt;&amp;lt;dc:name&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt; elements&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">028</span><span id="line-28"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;ns|E&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements of type E in the namespace &lt;i&gt;ns&lt;/i&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;dc|name&lt;/code&gt; finds &lt;code&gt;&amp;lt;dc:name&amp;gt;&lt;/code&gt; elements&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">029</span><span id="line-29"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;ns|*&lt;/code&gt;&lt;/td&gt;&lt;td&gt;all elements in the namespace &lt;i&gt;ns&lt;/i&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;dc|*&lt;/code&gt; finds &lt;code&gt;&amp;lt;dc:p&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;dc:img&amp;gt;&lt;/code&gt;elements&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">030</span><span id="line-30"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;#id&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements with attribute ID of "id"&lt;/td&gt;&lt;td&gt;&lt;code&gt;div#wrap&lt;/code&gt;, &lt;code&gt;#logo&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">031</span><span id="line-31"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;.class&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements with a class name of "class"&lt;/td&gt;&lt;td&gt;&lt;code&gt;div.left&lt;/code&gt;, &lt;code&gt;.result&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">032</span><span id="line-32"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;[attr]&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements with an attribute named "attr" (with any value)&lt;/td&gt;&lt;td&gt;&lt;code&gt;a[href]&lt;/code&gt;, &lt;code&gt;[title]&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">033</span><span id="line-33"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;[^attrPrefix]&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements with an attribute name starting with "attrPrefix". Use to find elements with HTML5 datasets&lt;/td&gt;&lt;td&gt;&lt;code&gt;[^data-]&lt;/code&gt;, &lt;code&gt;div[^data-]&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">034</span><span id="line-34"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;[attr=val]&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements with an attribute named "attr", and value equal to "val"&lt;/td&gt;&lt;td&gt;&lt;code&gt;img[width=500]&lt;/code&gt;, &lt;code&gt;a[rel=nofollow]&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">035</span><span id="line-35"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;[attr=&amp;quot;val&amp;quot;]&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements with an attribute named "attr", and value equal to "val"&lt;/td&gt;&lt;td&gt;&lt;code&gt;span[hello="Cleveland"][goodbye="Columbus"]&lt;/code&gt;, &lt;code&gt;a[rel=&amp;quot;nofollow&amp;quot;]&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">036</span><span id="line-36"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;[attr^=valPrefix]&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements with an attribute named "attr", and value starting with "valPrefix"&lt;/td&gt;&lt;td&gt;&lt;code&gt;a[href^=http:]&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">037</span><span id="line-37"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;[attr$=valSuffix]&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements with an attribute named "attr", and value ending with "valSuffix"&lt;/td&gt;&lt;td&gt;&lt;code&gt;img[src$=.png]&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">038</span><span id="line-38"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;[attr*=valContaining]&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements with an attribute named "attr", and value containing "valContaining"&lt;/td&gt;&lt;td&gt;&lt;code&gt;a[href*=/search/]&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">039</span><span id="line-39"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;[attr~=&lt;em&gt;regex&lt;/em&gt;]&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements with an attribute named "attr", and value matching the regular expression&lt;/td&gt;&lt;td&gt;&lt;code&gt;img[src~=(?i)\\.(png|jpe?g)]&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">040</span><span id="line-40"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;[*]&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements with any attribute&lt;/td&gt;&lt;td&gt;&lt;code&gt;p[*]&lt;/code&gt; finds &lt;code&gt;p&lt;/code&gt; elements that have at least one attribute; &lt;code&gt;p:not([*])&lt;/code&gt; finds those with no attributes&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">041</span><span id="line-41"> * &lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;The above may be combined in any order&lt;/td&gt;&lt;td&gt;&lt;code&gt;div.header[title]&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">042</span><span id="line-42"> * &lt;tr&gt;&lt;td colspan="3"&gt;&lt;h3&gt;Combinators&lt;/h3&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">043</span><span id="line-43"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;E F&lt;/code&gt;&lt;/td&gt;&lt;td&gt;an F element descended from an E element&lt;/td&gt;&lt;td&gt;&lt;code&gt;div a&lt;/code&gt;, &lt;code&gt;.logo h1&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">044</span><span id="line-44"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;E {@literal &gt;} F&lt;/code&gt;&lt;/td&gt;&lt;td&gt;an F direct child of E&lt;/td&gt;&lt;td&gt;&lt;code&gt;ol {@literal &gt;} li&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">045</span><span id="line-45"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;E + F&lt;/code&gt;&lt;/td&gt;&lt;td&gt;an F element immediately preceded by sibling E&lt;/td&gt;&lt;td&gt;&lt;code&gt;li + li&lt;/code&gt;, &lt;code&gt;div.head + div&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">046</span><span id="line-46"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;E ~ F&lt;/code&gt;&lt;/td&gt;&lt;td&gt;an F element preceded by sibling E&lt;/td&gt;&lt;td&gt;&lt;code&gt;h1 ~ p&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">047</span><span id="line-47"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;E, F, G&lt;/code&gt;&lt;/td&gt;&lt;td&gt;all matching elements E, F, or G&lt;/td&gt;&lt;td&gt;&lt;code&gt;a[href], div, h3&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">048</span><span id="line-48"> * &lt;tr&gt;&lt;td colspan="3"&gt;&lt;h3&gt;Pseudo selectors&lt;/h3&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">049</span><span id="line-49"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:lt(&lt;em&gt;n&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements whose sibling index is less than &lt;em&gt;n&lt;/em&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;td:lt(3)&lt;/code&gt; finds the first 3 cells of each row&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">050</span><span id="line-50"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:gt(&lt;em&gt;n&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements whose sibling index is greater than &lt;em&gt;n&lt;/em&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;td:gt(1)&lt;/code&gt; finds cells after skipping the first two&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">051</span><span id="line-51"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:eq(&lt;em&gt;n&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements whose sibling index is equal to &lt;em&gt;n&lt;/em&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;td:eq(0)&lt;/code&gt; finds the first cell of each row&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">052</span><span id="line-52"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:has(&lt;em&gt;selector&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that contains at least one element matching the &lt;em&gt;selector&lt;/em&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;div:has(p)&lt;/code&gt; finds &lt;code&gt;div&lt;/code&gt;s that contain &lt;code&gt;p&lt;/code&gt; elements.&lt;br&gt;&lt;code&gt;div:has(&amp;gt; a)&lt;/code&gt; selects &lt;code&gt;div&lt;/code&gt; elements that have at least one direct child &lt;code&gt;a&lt;/code&gt; element.&lt;br&gt;&lt;code&gt;section:has(h1, h2)&lt;/code&gt; finds &lt;code&gt;section&lt;/code&gt; elements that contain a &lt;code&gt;h1&lt;/code&gt; or a &lt;code&gt;h2&lt;/code&gt; element&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">053</span><span id="line-53"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:is(&lt;em&gt;selector list&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that match any of the selectors in the selector list&lt;/td&gt;&lt;td&gt;&lt;code&gt;:is(h1, h2, h3, h4, h5, h6)&lt;/code&gt; finds any heading element.&lt;br&gt;&lt;code&gt;:is(section, article) &gt; :is(h1, h2)&lt;/code&gt; finds a &lt;code&gt;h1&lt;/code&gt; or &lt;code&gt;h2&lt;/code&gt; that is a direct child of a &lt;code&gt;section&lt;/code&gt; or an &lt;code&gt;article&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">054</span><span id="line-54"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:not(&lt;em&gt;selector&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that do not match the &lt;em&gt;selector&lt;/em&gt;. See also {@link Elements#not(String)}&lt;/td&gt;&lt;td&gt;&lt;code&gt;div:not(.logo)&lt;/code&gt; finds all divs that do not have the "logo" class.&lt;p&gt;&lt;code&gt;div:not(:has(div))&lt;/code&gt; finds divs that do not contain divs.&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">055</span><span id="line-55"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:contains(&lt;em&gt;text&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that contains the specified text. The search is case insensitive. The text may appear in the found element, or any of its descendants. The text is whitespace normalized. &lt;p&gt;To find content that includes parentheses, escape those with a {@code \}.&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;p:contains(jsoup)&lt;/code&gt; finds p elements containing the text "jsoup".&lt;p&gt;{@code p:contains(hello \(there\) finds p elements containing the text "Hello (There)"}&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">056</span><span id="line-56"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:containsOwn(&lt;em&gt;text&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that directly contain the specified text. The search is case insensitive. The text must appear in the found element, not any of its descendants.&lt;/td&gt;&lt;td&gt;&lt;code&gt;p:containsOwn(jsoup)&lt;/code&gt; finds p elements with own text "jsoup".&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">057</span><span id="line-57"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:containsData(&lt;em&gt;data&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that contains the specified &lt;em&gt;data&lt;/em&gt;. The contents of {@code script} and {@code style} elements, and {@code comment} nodes (etc) are considered data nodes, not text nodes. The search is case insensitive. The data may appear in the found element, or any of its descendants.&lt;/td&gt;&lt;td&gt;&lt;code&gt;script:contains(jsoup)&lt;/code&gt; finds script elements containing the data "jsoup".&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">058</span><span id="line-58"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:containsWholeText(&lt;em&gt;text&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that contains the specified &lt;b&gt;non-normalized&lt;/b&gt; text. The search is case sensitive, and will match exactly against spaces and newlines found in the original input. The text may appear in the found element, or any of its descendants. &lt;p&gt;To find content that includes parentheses, escape those with a {@code \}.&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;p:containsWholeText(jsoup\nThe Java HTML Parser)&lt;/code&gt; finds p elements containing the text &lt;code&gt;"jsoup\nThe Java HTML Parser"&lt;/code&gt; (and not other variations of whitespace or casing, as &lt;code&gt;:contains()&lt;/code&gt; would. Note that {@code br} elements are presented as a newline.&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">059</span><span id="line-59"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:containsWholeOwnText(&lt;em&gt;text&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that &lt;b&gt;directly&lt;/b&gt; contain the specified &lt;b&gt;non-normalized&lt;/b&gt; text. The search is case sensitive, and will match exactly against spaces and newlines found in the original input. The text may appear in the found element, but not in its descendants. &lt;p&gt;To find content that includes parentheses, escape those with a {@code \}.&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;p:containsWholeOwnText(jsoup\nThe Java HTML Parser)&lt;/code&gt; finds p elements directly containing the text &lt;code&gt;"jsoup\nThe Java HTML Parser"&lt;/code&gt; (and not other variations of whitespace or casing, as &lt;code&gt;:contains()&lt;/code&gt; would. Note that {@code br} elements are presented as a newline.&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">060</span><span id="line-60"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:matches(&lt;em&gt;regex&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements containing &lt;b&gt;whitespace normalized&lt;/b&gt; text that matches the specified regular expression. The text may appear in the found element, or any of its descendants.&lt;/td&gt;&lt;td&gt;&lt;code&gt;td:matches(\\d+)&lt;/code&gt; finds table cells containing digits. &lt;code&gt;div:matches((?i)login)&lt;/code&gt; finds divs containing the text, case insensitively.&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">061</span><span id="line-61"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:matchesWholeText(&lt;em&gt;regex&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements containing &lt;b&gt;non-normalized&lt;/b&gt; whole text that matches the specified regular expression. The text may appear in the found element, or any of its descendants.&lt;/td&gt;&lt;td&gt;&lt;code&gt;td:matchesWholeText(\\s{2,})&lt;/code&gt; finds table cells a run of at least two space characters.&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">062</span><span id="line-62"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:matchesWholeOwnText(&lt;em&gt;regex&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements whose own &lt;b&gt;non-normalized&lt;/b&gt; whole text matches the specified regular expression. The text must appear in the found element, not any of its descendants.&lt;/td&gt;&lt;td&gt;&lt;code&gt;td:matchesWholeOwnText(\n\\d+)&lt;/code&gt; finds table cells directly containing digits following a neewline.&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">063</span><span id="line-63"> * &lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;The above may be combined in any order and with other selectors&lt;/td&gt;&lt;td&gt;&lt;code&gt;.light:contains(name):eq(0)&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">064</span><span id="line-64"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:matchText&lt;/code&gt;&lt;/td&gt;&lt;td&gt;treats text nodes as elements, and so allows you to match against and select text nodes.&lt;p&gt;&lt;b&gt;Note&lt;/b&gt; that using this selector will modify the DOM, so you may want to {@code clone} your document before using.&lt;/td&gt;&lt;td&gt;{@code p:matchText:firstChild} with input {@code &lt;p&gt;One&lt;br /&gt;Two&lt;/p&gt;} will return one {@link org.jsoup.nodes.PseudoTextElement} with text "{@code One}".&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">065</span><span id="line-65"> * &lt;tr&gt;&lt;td colspan="3"&gt;&lt;h3&gt;Structural pseudo selectors&lt;/h3&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">066</span><span id="line-66"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:root&lt;/code&gt;&lt;/td&gt;&lt;td&gt;The element that is the root of the document. In HTML, this is the &lt;code&gt;html&lt;/code&gt; element&lt;/td&gt;&lt;td&gt;&lt;code&gt;:root&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">067</span><span id="line-67"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:nth-child(&lt;em&gt;a&lt;/em&gt;n+&lt;em&gt;b&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;elements that have &lt;code&gt;&lt;em&gt;a&lt;/em&gt;n+&lt;em&gt;b&lt;/em&gt;-1&lt;/code&gt; siblings &lt;b&gt;before&lt;/b&gt; it in the document tree, for any positive integer or zero value of &lt;code&gt;n&lt;/code&gt;, and has a parent element. For values of &lt;code&gt;a&lt;/code&gt; and &lt;code&gt;b&lt;/code&gt; greater than zero, this effectively divides the element's children into groups of a elements (the last group taking the remainder), and selecting the &lt;em&gt;b&lt;/em&gt;th element of each group. For example, this allows the selectors to address every other row in a table, and could be used to alternate the color of paragraph text in a cycle of four. The &lt;code&gt;a&lt;/code&gt; and &lt;code&gt;b&lt;/code&gt; values must be integers (positive, negative, or zero). The index of the first child of an element is 1.&lt;/p&gt;</span>
<span class="source-line-no">068</span><span id="line-68"> * Additionally, &lt;code&gt;:nth-child()&lt;/code&gt; supports &lt;code&gt;odd&lt;/code&gt; and &lt;code&gt;even&lt;/code&gt; as arguments. &lt;code&gt;odd&lt;/code&gt; is the same as &lt;code&gt;2n+1&lt;/code&gt;, and &lt;code&gt;even&lt;/code&gt; is the same as &lt;code&gt;2n&lt;/code&gt;.&lt;/td&gt;&lt;td&gt;&lt;code&gt;tr:nth-child(2n+1)&lt;/code&gt; finds every odd row of a table. &lt;code&gt;:nth-child(10n-1)&lt;/code&gt; the 9th, 19th, 29th, etc, element. &lt;code&gt;li:nth-child(5)&lt;/code&gt; the 5h li&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">069</span><span id="line-69"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:nth-last-child(&lt;em&gt;a&lt;/em&gt;n+&lt;em&gt;b&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that have &lt;code&gt;&lt;em&gt;a&lt;/em&gt;n+&lt;em&gt;b&lt;/em&gt;-1&lt;/code&gt; siblings &lt;b&gt;after&lt;/b&gt; it in the document tree. Otherwise like &lt;code&gt;:nth-child()&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;tr:nth-last-child(-n+2)&lt;/code&gt; the last two rows of a table&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">070</span><span id="line-70"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:nth-of-type(&lt;em&gt;a&lt;/em&gt;n+&lt;em&gt;b&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;pseudo-class notation represents an element that has &lt;code&gt;&lt;em&gt;a&lt;/em&gt;n+&lt;em&gt;b&lt;/em&gt;-1&lt;/code&gt; siblings with the same expanded element name &lt;em&gt;before&lt;/em&gt; it in the document tree, for any zero or positive integer value of n, and has a parent element&lt;/td&gt;&lt;td&gt;&lt;code&gt;img:nth-of-type(2n+1)&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">071</span><span id="line-71"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:nth-last-of-type(&lt;em&gt;a&lt;/em&gt;n+&lt;em&gt;b&lt;/em&gt;)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;pseudo-class notation represents an element that has &lt;code&gt;&lt;em&gt;a&lt;/em&gt;n+&lt;em&gt;b&lt;/em&gt;-1&lt;/code&gt; siblings with the same expanded element name &lt;em&gt;after&lt;/em&gt; it in the document tree, for any zero or positive integer value of n, and has a parent element&lt;/td&gt;&lt;td&gt;&lt;code&gt;img:nth-last-of-type(2n+1)&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">072</span><span id="line-72"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:first-child&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that are the first child of some other element.&lt;/td&gt;&lt;td&gt;&lt;code&gt;div {@literal &gt;} p:first-child&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">073</span><span id="line-73"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:last-child&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that are the last child of some other element.&lt;/td&gt;&lt;td&gt;&lt;code&gt;ol {@literal &gt;} li:last-child&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">074</span><span id="line-74"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:first-of-type&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that are the first sibling of its type in the list of children of its parent element&lt;/td&gt;&lt;td&gt;&lt;code&gt;dl dt:first-of-type&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">075</span><span id="line-75"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:last-of-type&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that are the last sibling of its type in the list of children of its parent element&lt;/td&gt;&lt;td&gt;&lt;code&gt;tr {@literal &gt;} td:last-of-type&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">076</span><span id="line-76"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:only-child&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that have a parent element and whose parent element have no other element children&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">077</span><span id="line-77"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:only-of-type&lt;/code&gt;&lt;/td&gt;&lt;td&gt; an element that has a parent element and whose parent element has no other element children with the same expanded element name&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">078</span><span id="line-78"> * &lt;tr&gt;&lt;td&gt;&lt;code&gt;:empty&lt;/code&gt;&lt;/td&gt;&lt;td&gt;elements that contain no child elements or nodes, with the exception of blank text nodes, comments, XML declarations, and doctype declarations. In other words, it matches elements that are effectively empty of meaningful content.&lt;/td&gt;&lt;td&gt;&lt;code&gt;li:not(:empty)&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="source-line-no">079</span><span id="line-79"> * &lt;/table&gt;</span>
<span class="source-line-no">080</span><span id="line-80"> *</span>
<span class="source-line-no">081</span><span id="line-81"> * &lt;p&gt;A word on using regular expressions in these selectors: depending on the content of the regex, you will need to quote the pattern using &lt;b&gt;&lt;code&gt;Pattern.quote("regex")&lt;/code&gt;&lt;/b&gt; for it to parse correctly through both the selector parser and the regex parser. E.g. &lt;code&gt;String query = "div:matches(" + Pattern.quote(regex) + ");"&lt;/code&gt;.&lt;/p&gt;</span>
<span class="source-line-no">082</span><span id="line-82"> * &lt;p&gt;&lt;b&gt;Escaping special characters:&lt;/b&gt; to match a tag, ID, or other selector that does not follow the regular CSS syntax, the query must be escaped with the &lt;code&gt;\&lt;/code&gt; character. For example, to match by ID {@code &lt;p id="i.d"&gt;}, use {@code document.select("#i\\.d")}.&lt;/p&gt;</span>
<span class="source-line-no">083</span><span id="line-83"> *</span>
<span class="source-line-no">084</span><span id="line-84"> * @see Element#select(String css)</span>
<span class="source-line-no">085</span><span id="line-85"> * @see Elements#select(String css)</span>
<span class="source-line-no">086</span><span id="line-86"> * @see Element#selectXpath(String xpath)</span>
<span class="source-line-no">087</span><span id="line-87"> */</span>
<span class="source-line-no">088</span><span id="line-88">public class Selector {</span>
<span class="source-line-no">089</span><span id="line-89">    // not instantiable</span>
<span class="source-line-no">090</span><span id="line-90">    private Selector() {}</span>
<span class="source-line-no">091</span><span id="line-91"></span>
<span class="source-line-no">092</span><span id="line-92">    /**</span>
<span class="source-line-no">093</span><span id="line-93">     * Find elements matching selector.</span>
<span class="source-line-no">094</span><span id="line-94">     *</span>
<span class="source-line-no">095</span><span id="line-95">     * @param query CSS selector</span>
<span class="source-line-no">096</span><span id="line-96">     * @param root  root element to descend into</span>
<span class="source-line-no">097</span><span id="line-97">     * @return matching elements, empty if none</span>
<span class="source-line-no">098</span><span id="line-98">     * @throws SelectorParseException (unchecked) on an invalid CSS query.</span>
<span class="source-line-no">099</span><span id="line-99">     */</span>
<span class="source-line-no">100</span><span id="line-100">    public static Elements select(String query, Element root) {</span>
<span class="source-line-no">101</span><span id="line-101">        Validate.notEmpty(query);</span>
<span class="source-line-no">102</span><span id="line-102">        return select(QueryParser.parse(query), root);</span>
<span class="source-line-no">103</span><span id="line-103">    }</span>
<span class="source-line-no">104</span><span id="line-104"></span>
<span class="source-line-no">105</span><span id="line-105">    /**</span>
<span class="source-line-no">106</span><span id="line-106">     * Find elements matching selector.</span>
<span class="source-line-no">107</span><span id="line-107">     *</span>
<span class="source-line-no">108</span><span id="line-108">     * @param evaluator CSS selector</span>
<span class="source-line-no">109</span><span id="line-109">     * @param root root element to descend into</span>
<span class="source-line-no">110</span><span id="line-110">     * @return matching elements, empty if none</span>
<span class="source-line-no">111</span><span id="line-111">     */</span>
<span class="source-line-no">112</span><span id="line-112">    public static Elements select(Evaluator evaluator, Element root) {</span>
<span class="source-line-no">113</span><span id="line-113">        Validate.notNull(evaluator);</span>
<span class="source-line-no">114</span><span id="line-114">        Validate.notNull(root);</span>
<span class="source-line-no">115</span><span id="line-115">        return Collector.collect(evaluator, root);</span>
<span class="source-line-no">116</span><span id="line-116">    }</span>
<span class="source-line-no">117</span><span id="line-117"></span>
<span class="source-line-no">118</span><span id="line-118">    /**</span>
<span class="source-line-no">119</span><span id="line-119">     * Find elements matching selector.</span>
<span class="source-line-no">120</span><span id="line-120">     *</span>
<span class="source-line-no">121</span><span id="line-121">     * @param query CSS selector</span>
<span class="source-line-no">122</span><span id="line-122">     * @param roots root elements to descend into</span>
<span class="source-line-no">123</span><span id="line-123">     * @return matching elements, empty if none</span>
<span class="source-line-no">124</span><span id="line-124">     */</span>
<span class="source-line-no">125</span><span id="line-125">    public static Elements select(String query, Iterable&lt;Element&gt; roots) {</span>
<span class="source-line-no">126</span><span id="line-126">        Validate.notEmpty(query);</span>
<span class="source-line-no">127</span><span id="line-127">        Validate.notNull(roots);</span>
<span class="source-line-no">128</span><span id="line-128">        Evaluator evaluator = QueryParser.parse(query);</span>
<span class="source-line-no">129</span><span id="line-129">        Elements elements = new Elements();</span>
<span class="source-line-no">130</span><span id="line-130">        IdentityHashMap&lt;Element, Boolean&gt; seenElements = new IdentityHashMap&lt;&gt;();</span>
<span class="source-line-no">131</span><span id="line-131">        // dedupe elements by identity, not equality</span>
<span class="source-line-no">132</span><span id="line-132"></span>
<span class="source-line-no">133</span><span id="line-133">        for (Element root : roots) {</span>
<span class="source-line-no">134</span><span id="line-134">            final Elements found = select(evaluator, root);</span>
<span class="source-line-no">135</span><span id="line-135">            for (Element el : found) {</span>
<span class="source-line-no">136</span><span id="line-136">                if (seenElements.put(el, Boolean.TRUE) == null) {</span>
<span class="source-line-no">137</span><span id="line-137">                    elements.add(el);</span>
<span class="source-line-no">138</span><span id="line-138">                }</span>
<span class="source-line-no">139</span><span id="line-139">            }</span>
<span class="source-line-no">140</span><span id="line-140">        }</span>
<span class="source-line-no">141</span><span id="line-141">        return elements;</span>
<span class="source-line-no">142</span><span id="line-142">    }</span>
<span class="source-line-no">143</span><span id="line-143"></span>
<span class="source-line-no">144</span><span id="line-144">    // exclude set. package open so that Elements can implement .not() selector.</span>
<span class="source-line-no">145</span><span id="line-145">    static Elements filterOut(Collection&lt;Element&gt; elements, Collection&lt;Element&gt; outs) {</span>
<span class="source-line-no">146</span><span id="line-146">        Elements output = new Elements();</span>
<span class="source-line-no">147</span><span id="line-147">        for (Element el : elements) {</span>
<span class="source-line-no">148</span><span id="line-148">            boolean found = false;</span>
<span class="source-line-no">149</span><span id="line-149">            for (Element out : outs) {</span>
<span class="source-line-no">150</span><span id="line-150">                if (el.equals(out)) {</span>
<span class="source-line-no">151</span><span id="line-151">                    found = true;</span>
<span class="source-line-no">152</span><span id="line-152">                    break;</span>
<span class="source-line-no">153</span><span id="line-153">                }</span>
<span class="source-line-no">154</span><span id="line-154">            }</span>
<span class="source-line-no">155</span><span id="line-155">            if (!found)</span>
<span class="source-line-no">156</span><span id="line-156">                output.add(el);</span>
<span class="source-line-no">157</span><span id="line-157">        }</span>
<span class="source-line-no">158</span><span id="line-158">        return output;</span>
<span class="source-line-no">159</span><span id="line-159">    }</span>
<span class="source-line-no">160</span><span id="line-160"></span>
<span class="source-line-no">161</span><span id="line-161">    /**</span>
<span class="source-line-no">162</span><span id="line-162">     * Find the first element that matches the query.</span>
<span class="source-line-no">163</span><span id="line-163">     * @param cssQuery CSS selector</span>
<span class="source-line-no">164</span><span id="line-164">     * @param root root element to descend into</span>
<span class="source-line-no">165</span><span id="line-165">     * @return the matching element, or &lt;b&gt;null&lt;/b&gt; if none.</span>
<span class="source-line-no">166</span><span id="line-166">     */</span>
<span class="source-line-no">167</span><span id="line-167">    public static @Nullable Element selectFirst(String cssQuery, Element root) {</span>
<span class="source-line-no">168</span><span id="line-168">        Validate.notEmpty(cssQuery);</span>
<span class="source-line-no">169</span><span id="line-169">        return Collector.findFirst(QueryParser.parse(cssQuery), root);</span>
<span class="source-line-no">170</span><span id="line-170">    }</span>
<span class="source-line-no">171</span><span id="line-171"></span>
<span class="source-line-no">172</span><span id="line-172">    public static class SelectorParseException extends IllegalStateException {</span>
<span class="source-line-no">173</span><span id="line-173">        public SelectorParseException(String msg) {</span>
<span class="source-line-no">174</span><span id="line-174">            super(msg);</span>
<span class="source-line-no">175</span><span id="line-175">        }</span>
<span class="source-line-no">176</span><span id="line-176"></span>
<span class="source-line-no">177</span><span id="line-177">        public SelectorParseException(String msg, Object... msgArgs) {</span>
<span class="source-line-no">178</span><span id="line-178">            super(String.format(msg, msgArgs));</span>
<span class="source-line-no">179</span><span id="line-179">        }</span>
<span class="source-line-no">180</span><span id="line-180"></span>
<span class="source-line-no">181</span><span id="line-181">        public SelectorParseException(Throwable cause, String msg, Object... msgArgs) {</span>
<span class="source-line-no">182</span><span id="line-182">            super(String.format(msg, msgArgs), cause);</span>
<span class="source-line-no">183</span><span id="line-183">        }</span>
<span class="source-line-no">184</span><span id="line-184">    }</span>
<span class="source-line-no">185</span><span id="line-185">}</span>




























































</pre>
</div>
</main>
</body>
</html>
